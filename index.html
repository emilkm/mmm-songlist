<!DOCTYPE HTML>
<html>
    <head>
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-community/dist/ag-grid-community.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ag-grid-community/styles/ag-theme-alpine.css" />
        <link rel="stylesheet" href="app.css" type="text/css">
    </head>
    <body>
        <script type="text/javascript">
// Use legacy theme for AG Grid CDN
fetch('data.json')
  .then(response => response.text())
  .then(text => {
    let data = text.trim();
    if (data.startsWith('[')) {
      data = JSON.parse(data);
    } else {
      data = text.split('\n').map(line => line ? JSON.parse(line) : null).filter(Boolean);
    }
    const columnDefs = [
      { field: 'artist', headerName: 'Artist', sortable: true, filter: true, flex: 2, pinned: 'left' },
      { field: 'song', headerName: 'Song', sortable: true, filter: true, flex: 2, pinned: 'left', minWidth: 300 },
      { field: 'userdifficulty', headerName: 'User Difficulty', sortable: true, sortType: 'number', filter: true, flex: 1, cellStyle: { 'background-color': '#fdf3ce', 'font-weight': 'bold' } },
      { field: 'usernotes', headerName: 'User Notes', sortable: true, filter: true, width: 300, autoHeight: true, cellStyle: { 'white-space': 'normal' } },
      { field: 'mmmdifficulty', headerName: 'MMM Difficulty', sortable: true, sortType: 'number', filter: true, flex: 1, cellStyle: { 'background-color': '#fbe6ce', 'font-weight': 'bold' }},
      { field: 'mmmnotes', headerName: 'MMM Notes', sortable: true, filter: true, width: 300, autoHeight: true, cellStyle: { 'white-space': 'normal' } },
      { field: 'style', headerName: 'Style', sortable: true, filter: true, flex: 1 },
      { field: 'learn', headerName: 'Learn', sortable: true, filter: true, flex: 1 },
      { field: 'tuning', headerName: 'Tuning', sortable: true, filter: true, flex: 1 },
      { field: 'timesignature', headerName: 'Time Signature', sortable: true, filter: true, flex: 1 },
      { field: 'mmmtutorial', headerName: 'MMM Tutorial', sortable: true, filter: true, flex: 2 }
    ];
    agGrid.createGrid(document.querySelector('#myGrid'), {
      theme: 'legacy',
      columnDefs,
      rowData: data,
      defaultColDef: {
        resizable: true,
        sortable: true,
        filter: true,
        floatingFilter: true,
        autoHeight: true,
        cellStyle: { 'white-space': 'normal' }
      },
      animateRows: true,
      pagination: true,
      paginationPageSize: 50
    });
  });
        </script>

        <div id="myGrid" class="ag-theme-alpine" style="height: 100%; width: 100%;"></div>
    </body>
</html>

